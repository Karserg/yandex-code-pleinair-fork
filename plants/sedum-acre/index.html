<!DOCTYPE html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
<script>
  function setup() {
    createCanvas(450, 800);
    background("white");
  
    fill("rgba(0, 128, 0, 255)");
    stroke("rgba(0,0,0,0)");
    
    for (let i = 0; i < 20; i++) {
        createFlow(i++, MAX_TREE, width / 2, height - RADIUS, 0, 60, 0);
    }
  }
  
  const RADIUS = 30;
  const MAX_TREE = 20;
  
  function draw() {
  }
  
  function rndMoveUp(coef = 0) {
    const max = RADIUS / 2 + coef;
    return parseInt(Math.floor(Math.random() * max));
  }
  
  
  function rndMoveX(coef = 0.5) {
    const dist = rndMoveUp();
    return Math.random() > coef ? dist : -dist;
  }
  
  function rndMoveColor(coef = 0) {
    const max = 8 + coef;
    const color = Math.floor(Math.random() * max);
    
    return color > 255 ? 255 : color;
  }
  
  function createFlow(...props) {
    let i = props[0];
  
    const [x, y] = flowAndTrunk(...props);
    
    fill("#FFEB3B")
    circle(x, y, RADIUS * 1.3);
  }
  
  function flowAndTrunk(indexFlow, count, x, y, r, g, b) {
    fill(`rgba(${r}, ${g}, ${b}, 255)`);
    circle(x, y, RADIUS);
  
    if (count < 0) {
      return [x, y];
    }
    
    const nextData = [x + rndMoveX(indexFlow / 10), y - rndMoveUp((MAX_TREE - count) / 3), r + rndMoveColor(5), g + rndMoveColor(5), b + rndMoveColor(1)]
    
    return flowAndTrunk(indexFlow, count - 1, ...nextData)
  }
</script>
